<!-- /home/siisi/atmp/atmp_app/templates/atmp_app/incident_detail.html -->

{% extends "base.html" %}
{% load i18n file_extras %}
{% block title %}{{ incident.title }}{% endblock %}

{% block content %}
<h1 class="h3 mb-3">{{ incident.title }}</h1>

<div class="row">
    <div class="col-md-6">
        <dl class="row">
            <dt class="col-sm-4">{% trans "Status" %}</dt>
            <dd class="col-sm-8">{{ incident.get_status_display }}</dd>

            <dt class="col-sm-4">{% trans "Date" %}</dt>
            <dd class="col-sm-8">{{ incident.date_of_incident }}</dd>

            <dt class="col-sm-4">{% trans "Location" %}</dt>
            <dd class="col-sm-8">{{ incident.location }}</dd>
        </dl>
    </div>
    <div class="col-md-6">
        <p>{{ incident.description|linebreaks }}</p>
    </div>
</div>

<hr>
<h4>{% trans "Documents" %}</h4>
<ul class="list-group mb-4">
    {% for doc in incident.documents.all %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <a href="{{ doc.file.url }}">{{ doc.file.name|basename }}</a>
        <small class="text-muted">
            {{ doc.uploaded_by.email }} â€” {{ doc.uploaded_at|date:"SHORT_DATETIME_FORMAT" }}
        </small>
    </li>
    {% empty %}
    <li class="list-group-item text-center">{% trans "No documents attached." %}</li>
    {% endfor %}
</ul>

<div class="text-center mb-5">
    <a href="{% url 'atmp_app:incident-list' %}" class="btn btn-secondary">
        &larr; {% trans "Back to List" %}
    </a>
</div>
{% endblock %}
